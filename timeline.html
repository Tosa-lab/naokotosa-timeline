<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Naoko Tosa Timeline</title>

<style>
/* --- reset --- */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%}
body{font-family:"Noto Sans JP",sans-serif;background:#111;color:#fff;line-height:1.45}

/* --- custom props --- */
:root{
  --W:1060;           /* タイムラインの論理幅 (px)              */
  --PITCH:25;         /* 1 年 = 25px                            */
  --X0:20;            /* 1985 年の X 座標                       */
  --LEGEND-H:140;     /* 凡例ボックス高さ                      */
  --ROW-H:20; --ROW-GAP:6; /* バー高さと行間                     */
}

/* --- canvas ラッパー: スクロール時に左右が切れないよう中央寄せ --- */
#wrapper{width:100%;overflow-x:auto;display:flex;justify-content:center}

/* --- タイムライン本体 --- */
#canvas{position:relative;width:calc(var(--W)*1px);margin:0 auto;padding-top:45px;padding-bottom:45px;transform-origin:top center;transform:scaleX(1)}

/* --- grid & year labels --- */
.grid{position:absolute;left:0;top:0;width:100%;height:100%;background:linear-gradient(to right,rgba(255,255,255,.06) 1px,transparent 1px),linear-gradient(to bottom,rgba(255,255,255,.04) 1px,transparent 1px);background-size:calc(var(--PITCH)*1px) var(--ROW-H) ,100% var(--ROW-H)}
.grid::before{content:"";position:absolute;left:calc(var(--X0)*1px);top:0;width:2px;height:100%;background:#fff}
.year{position:sticky;z-index:10;font-size:9pt;transform:translateX(-50%);pointer-events:none}
.year span{display:inline-block;transform:rotate(-70deg);transform-origin:top center}
.year.top{top:4px}
.year.bottom{bottom:4px}

/* --- legend --- */
#legend{position:fixed;top:1rem;left:1rem;z-index:9999;display:flex;flex-direction:column;gap:.4rem;font-size:9pt;padding:1rem;background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.2);backdrop-filter:blur(4px)}
#legend h2{font-size:1rem;margin-bottom:.4rem}
#legend div{display:flex;align-items:center;gap:.4rem;white-space:nowrap}
.legend-color{width:1.2rem;height:.8rem;border-radius:2px}

.bar{position:absolute;height:calc(var(--ROW-H)*1px);background:rgba(255,255,255,.7);border-radius:2px;padding:0 .4rem;display:flex;align-items:center;font-size:8pt;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* --- media query: narrow screens – horizontally squash the timeline --- */
@media(max-width:768px){
  #canvas{transform:scaleX(.75)}
}
</style>
</head>

<body>
<div id="legend"></div>

<div id="wrapper">
  <div id="canvas">
    <div id="grid" class="grid"></div>
    <div id="years"></div>
    <div id="bars"></div>
  </div>
</div>

<script>
/* === CONFIG === */
const START_YEAR=1985;
const END_YEAR  =2025;
const CATEGORIES={
  "Solo Exhibition":"#ea4335",
  "Group Exhibition":"#4285f4",
  "Award":"#fbbc05",
  "Performance":"#34a853",
  "Residency":"#c5221f",
  "Other":"#9aa0a6"
};
/* Data: [title, start-year, end-year(optional), category] */
const DATA=[
  ["Light Sculpture Exhibition",1993,null,"Solo Exhibition"],
  ["'Sound of Ikebana' Launch",2012,null,"Other"],
  ["'New Japanism: Four Seasons'",2025,null,"Performance"],
  /* …必要に応じて追加… */
];

/* === BUILD TIMELINE === */
const PITCH = +getComputedStyle(document.documentElement).getPropertyValue('--PITCH');
const X0    = +getComputedStyle(document.documentElement).getPropertyValue('--X0');
const ys    = document.getElementById('years');

/* year labels (top & bottom) */
for(let y=START_YEAR;y<=END_YEAR;y++){
  const x=(y-START_YEAR)*PITCH+X0;
  ['top','bottom'].forEach(pos=>{
    const e=document.createElement('div');
    e.className=`year ${pos}`;
    e.style.left=`${x}px`;
    e.innerHTML=`<span>${y}</span>`;
    ys.appendChild(e);
  });
}

/* bars */
const bars=document.getElementById('bars');
const LEG_H=+getComputedStyle(document.documentElement).getPropertyValue('--LEGEND-H');
const ROW_H=+getComputedStyle(document.documentElement).getPropertyValue('--ROW-H');
const ROW_GAP=+getComputedStyle(document.documentElement).getPropertyValue('--ROW-GAP');

DATA.forEach((d,i)=>{
  const [title,sy,ey,cat]=d;
  const y0=i*(ROW_H+ROW_GAP)+LEG_H;
  const x0=(sy-START_YEAR)*PITCH+X0;
  const w=((ey??sy)-sy+1)*PITCH;
  const el=document.createElement('div');
  el.className='bar';
  el.textContent=title;
  el.style.left=`${x0}px`;
  el.style.top =`${y0}px`;
  el.style.width=`${w}px`;
  el.style.background=CATEGORIES[cat]||'#fff';
  bars.appendChild(el);
});

/* legend */
const legend=document.getElementById('legend');
const h2=document.createElement('h2');h2.textContent='Legend';legend.appendChild(h2);
Object.entries(CATEGORIES).forEach(([k,col])=>{
  const row=document.createElement('div');
  row.innerHTML=`<span class="legend-color" style="background:${col}"></span>${k}`;
  legend.appendChild(row);
});
</script>
</body>
</html>
